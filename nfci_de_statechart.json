{
  "id": "Deutschland Maschine",
  "context": {
    "USD": "1000",
    "BTC": "0",
    "ETH": "0"
  },
  "initial": "Out of the Market",
  "states": {
    "Out of the Market": {
      "description": "Wenn <1j muss verstanden werden dass das einkommensteuererhoehend wirkt somit nur wenn die progressive Einkommensteuerfunktion vom Verkaufswert abgezogen noch positiven Wert ergibt",
      "initial": "Slice and Sell",
      "states": {
        "Slice and Sell": {},
        "Wait Prescribed Holding Period": {
          "description": "Es zahl si net aus zu verkaufen, wartma no bis die Haltefrist vorbei ist",
          "on": {
            "Halteperiode Over": {
              "target": "Slice and Sell"
            }
          }
        }
      },
      "on": {
        "buy rule fired": {
          "target": "In the Market"
        },
        "sell": [
          {
            "target": ".Wait Prescribed Holding Period",
            "cond": "in Halteperiode und es zahlt sich nicht Aus",
            "description": "Haltefristbedingte Verkaufsneigung = f(x) = 100 * (1 - (x/365)^5)\n\nverlustrate  = (komulierter Verlust - Freibetrag )/Gesammter Wertbestand\n\nVerkaufswahrscheinlichkeit = Verlustrate * Haltefristbedingte Verkaufsneigung"
          },
          {
            "target": ".Slice and Sell"
          }
        ]
      }
    },
    "In the Market": {
      "description": "We are in the Market as long as we don't get a sell rule. That means that we also buy newly added funds and rebalance our  crypto assets regularly.",
      "initial": "Rebalance, Slice and Buy",
      "states": {
        "Tax Loss Harvesting": {
          "description": "Wir schauen ob wir out of the market gehen sollen um Verluste zu realisieren",
          "initial": "In the Market for a GRACE PERIOD",
          "states": {
            "In the Market for a GRACE PERIOD": {
              "on": {
                "Loss > MIN_LOSS &  Days In the Market < Halteperiode": {
                  "target": "Slice and Sell"
                }
              }
            },
            "Slice and Sell": {
              "description": "Out of The Market for a Prescribed Washtrading Period",
              "on": {
                "Washtrading Period passed": {
                  "target": "#Deutschland Maschine.In the Market.Rebalance, Slice and Buy"
                }
              }
            }
          }
        },
        "Rebalance, Slice and Buy": {
          "description": "Wir schauen ob Rebalancing nÃ¶tig, kaufen  auch nach wenn noch USD da ist",
          "initial": "wait a zeitl",
          "states": {
            "wait a zeitl": {
              "on": {
                "a zeitl must have passed since last order": {
                  "target": "Rebalance"
                }
              }
            },
            "Rebalance": {
              "initial": "Slice and Buy",
              "states": {
                "Slice and Buy": {}
              }
            }
          }
        }
      },
      "on": {
        "after x hours": [
          {
            "target": ".Tax Loss Harvesting",
            "cond": "unrealised Loss",
            "internal": false
          },
          {
            "target": ".Rebalance, Slice and Buy"
          }
        ],
        "sell rule fired": {
          "target": "Out of the Market"
        }
      }
    }
  }
}